/**
 * 全局应用配置管理
 */


/**
 * 定义全局变量 GConfig 和其它。
 */
var
/**
 * GConfig 变量为总应用命名空间，之后会再对该命名空间进行扩展，
 */
GConfig = {};

((function fnGb() {
	var 
		/**
		 * 主机管理。
		 * 内部成员会重新添加到 Gb 下。
		 * 
		 * @private
		 */
		_host = {
			/**
			 * 项目前端资源主机环境。
			 */
			assets: "/",

			/**
			 * 时间戳
			 * @type {Int}
			 */
			tag:  (new Date()).getTime()//版本号
		},
		//百度地图密钥
		_baiduMapAk = "范德萨发"
	;
	
	// 以下为 public 内容。
	
	/**
	 * 命名空间内部对象。
	 */
	var _gConfig = {
		/**
		 * 接口Api前缀
		 * @type {String}
		 */
		API_PREV: "/cls",

		
		isTest: true,	//用于开发阶段使用，全部启用测试通道，慎用再慎用
		/**
		 * 站点名称
		 * 
		 * @property
		 * @static 
		 * @type {String}
		 */
		SITE_NAME: "",

		/**
		 * 当前版本号
		 * @type {String}
		 */
		WAP_VERSION: "1.0.0",

		/**
		 * 是否开启html5模式
		 * @type {Boolean}
		 */
		html5Model: document.getElementsByTagName("base").length > 0, 

		/**
		 * 当前项目前端资源域名环境，包含版本号。
		 * 
		 * @property
		 * @static 
		 * @type {String}
		 */
		ASSETS_HOST: _host.assets,

		/**
		 * 类库路径
		 * @type {[type]}
		 */
		LIB_ADDRESS: "./lib/",

		/**
		 * 时间戳
		 * @type {Int}
		 */
		TAG: _host.tag,
		
		/**
		 * requirejs 配置
		 */
		requireConfig: {
			baseUrl: "./js/",         //js基础路径
			paths:{
				"jquery": "../lib/jquery.min",
				"global": "../js/global.min",
		        "angular" :  "../lib/angular/1.5.6/angular.min",
        		"ui-router" : "../lib/angular/angular-ui/angular-ui-router.min",
		        "angular-animate" : "../lib/angular/1.5.6/angular-animate.min",
                "text" : "../lib/require/text.min",
                "util" : "../lib/util.min",
                "loading" : "../lib/overlay/loading.min",
				"iscroll": "../lib/iscroll/iscroll",
				"myScroll": "../lib/myScroll.min",
                "say" : "../lib/overlay/say.min",
                "confirm" : "../lib/overlay/confirm.min",
                "overlayBase" : "../lib/overlay/base.min",
                "tip" : "../lib/overlay/tip.min",
                "hammer": "../lib/hammer.min",
                "serviceModule": "services/serviceModule",
                "directiveModule" : "directives/directiveModule",
                "imgScroll": "../lib/imgScroll.min",
                "photoSwipe": "../lib/photoSwipe/photoSwipe.min",
                "provinceData": "../lib/province-data", 
                "md5": "../lib/jquery.md5",
                "baiduMap": "http://api.map.baidu.com/getscript?v=2.0&services=&t=20160513110936&ak=" + _host._baiduMapAk,
                "wx": "http://res.wx.qq.com/open/js/jweixin-1.0.0",
				"underscore": "../lib/underscore",
			},
		    shim: {
		        "angular": {
				    deps: ['jquery'],
		            exports: 'angular'
		        },
				"ui-router":{
				    deps: ['angular'],
				    exports:"ui-router"
				},
				"angular-animate":{
				    deps: ['angular'],
				    exports:"angular-animate"
				},
				"md5":{
				    deps: ['jquery'],
				    exports:"md5"
				}
		    },
		    waitSeconds: 0,
			urlArgs: "bust=" + _host.tag
		}
	};
	
	// 全局操作执行入口。
	((function render() {
		window.GConfig = _gConfig;	// 将内部命名空间对象赋到全局对象下。
		if(window.require){
        	require.config(GConfig.requireConfig); 
		}
	}))();
}))();